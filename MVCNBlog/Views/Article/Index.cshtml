@using System.Activities.Expressions
@model MVCNBlog.ViewModels.ArticleViewModel
@{
    ViewBag.Title = "Home Page";
}

<h2>Article</h2>
<b>Title:</b>
@Html.DisplayFor(modelItem => Model.Title)
<br/>
<b>Content:</b>
@Html.DisplayFor(modelItem => Model.Content)
<br />
<b>Publication date:</b>
@Html.DisplayTextFor(modelItem => Model.PublicationDate)
<br />
<b>Author:</b>
@Html.DisplayTextFor(modelItem => Model.Author.Name)
<br />
<b>Tags:</b>
@foreach (var tag in Model.Tags)
{
    <b> &nbsp;</b> @Html.DisplayFor(modelItem => tag)
}

@foreach (var comment in Model.Comments)
{
    <br />
            <b> &nbsp; &nbsp; Comment:</b> @Html.DisplayFor(modelItem => comment.Content)
            <b> &nbsp; &nbsp; Author's comment:</b> @Html.DisplayFor(modelItem => comment.Author.Name)

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    @Html.RouteLink("Edit comment", "CommentAction", new { id = comment.Id }, new { @class = "btn btn-default" })
                </div>
            </div>
}
<br />
@using (Html.BeginForm("Create", "Comment"))
{
    //TODO not client side
    @Html.AntiForgeryToken()
    <input type="text" name="Content" placeholder="Type to begin..."/>
    <label>@TempData["CommentError"]</label>
    <input type="hidden" name="ArticleId" value="@Model.Id"/>

    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Add comment" class="btn btn-default"/>
        </div>
    </div>
}

<br />
@Html.RouteLink("Edit article", "ArticleAction", new { action = "Edit", title = Model.Title, id = Model.Id },
    new { @class = "btn btn-default" })
@Html.RouteLink("Delete article", "ArticleAction", new { action = "Delete", title = Model.Title, id = Model.Id },
    new { @class = "btn btn-default" })

<br />

<div>
    @Html.RouteLink("Back to articles", "AllArticles", new { action = "All" },
    new { @class = "btn btn-default" })
</div>
